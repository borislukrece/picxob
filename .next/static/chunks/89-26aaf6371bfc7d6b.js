"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{6799:function(e,t,o){o.d(t,{GalleryProvider:function(){return l},d:function(){return u}});var n=o(7437),r=o(2265),a=o(6006),i=o(5351);let s=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,[o,l]=(0,r.useState)([]),[u,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(1),[h,g]=(0,r.useState)(null),[f,w]=(0,r.useState)("public"),{credentials:y}=(0,a.a)(),p=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;if(u||null!==h&&d>=h)return;let t=null;try{var o,n;c(!0);let r="private"===f?"".concat(null!==(o=(0,i.Aq)())&&void 0!==o?o:"","/users/images?page=").concat(d,"&entries=").concat(e):"".concat(null!==(n=(0,i.Aq)())&&void 0!==n?n:"","/images?page=").concat(d,"&entries=").concat(e);t=await new Promise(async(e,t)=>{try{let o=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},cache:"no-store"});if(o.ok){let t=await o.json(),n=t.totalPage;n&&"number"==typeof n?g(n):g(1),e(t.images)}else{let e=await o.text();t(Error("HTTP error! status: ".concat(o.status,", message: ").concat(e)))}}catch(e){t(e)}})}catch(e){console.log(e)}finally{t&&"object"==typeof t&&(l(e=>t?[...e,...t]:[...e]),m(e=>e+1)),c(!1)}};return(0,r.useEffect)(()=>{(async()=>{await p()})()},[f]),(0,n.jsx)(s.Provider,{value:{gallery:o,setGallery:l,loadingGallery:u,getGallery:p,displayImage:f,handleDisplayImages:e=>{e!==f&&(l([]),m(1),g(null),c(!1),w(e))}},children:t})},u=()=>{let e=(0,r.useContext)(s);if(!e)throw Error("useGallery must be used within a GalleryProvider");return e}},7979:function(e,t,o){o.d(t,{GridProvider:function(){return i},N:function(){return s}});var n=o(7437),r=o(2265);let a=(0,r.createContext)(void 0),i=e=>{let{children:t}=e,[o,i]=(0,r.useState)(!1);return(0,n.jsx)(a.Provider,{value:{grid:o,setGrid:i},children:t})},s=()=>{let e=(0,r.useContext)(a);if(!e)throw Error("useGrid must be used within a GridProvider");return e}},5627:function(e,t,o){o.d(t,{ImageProvider:function(){return i},d:function(){return s}});var n=o(7437),r=o(2265);let a=(0,r.createContext)(void 0),i=e=>{let{children:t}=e,[o,i]=(0,r.useState)(null);return(0,n.jsx)(a.Provider,{value:{image:o,setImage:i},children:t})},s=()=>{let e=(0,r.useContext)(a);if(!e)throw Error("useImage must be used within an ImageProvider");return e}},7693:function(e,t,o){o.d(t,{MessageProvider:function(){return u},U:function(){return c}});var n=o(7437),r=o(2265),a=o(6006),i=o(5351),s=o(6799);let l=(0,r.createContext)(void 0),u=e=>{let{children:t}=e,[o,u]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),{credentials:g}=(0,a.a)(),{setGallery:f}=(0,s.d)();async function w(e){try{let t=await fetch("https://api-inference.huggingface.co/models/black-forest-labs/FLUX.1-dev",{headers:{Authorization:"Bearer ".concat("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"),"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)});if(!t.ok){let e=await t.text();throw Error("HTTP error! status: ".concat(t.status,", message: ").concat(e))}return await t.blob()}catch(e){console.log("Error: ",e)}}let y=(0,r.useCallback)(async e=>{if(!c&&e){let t=null;try{d(!0);let o=await w({inputs:e});o&&void 0!==o&&(t=await new Promise((t,n)=>{let r=new FileReader;r.readAsDataURL(o),r.onloadend=async()=>{let o=r.result;if("string"==typeof o){let r=o.split(",")[1];try{let o=await fetch("/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:r})}),n={name:(await o.json()).data.uri,prompt:e},a=await new Promise(async e=>{try{let t=await fetch("".concat((0,i.Aq)(),"/images"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+g},body:JSON.stringify(n)});if(t.ok){let{image:o}=await t.json();e(o)}else e(null)}catch(t){e(null)}});t(a)}catch(e){n(e)}}else n(Error("FileReader result is not a string."))},r.onerror=()=>{n(Error("Error reading the file."))}}))}catch(e){console.log(e)}finally{return d(!1),t}}},[g,c]);return(0,r.useEffect)(()=>{if(o){let e=o[o.length-1];e&&"user"===e.type&&e.token!==m&&(h(e.token),(async()=>{let t=e.message;await y(t).then(e=>{if(e&&void 0!==e){let t={token:(0,i.DO)(),type:"bot",message:[e]};u(e=>e?[...e,t]:[t]),t.message.map(e=>{f(t=>t?[e,...t]:[e])})}else{let e={token:(0,i.DO)(),type:"__error",message:"An excepted error occurred while processing the message. Please try again, if the error persists, contact our support."};u(t=>t?[...t,e]:[e])}}).catch(e=>{let t={token:(0,i.DO)(),type:"bot",message:"Error sending message to bot: "+e.message};u(e=>e?[...e,t]:[t]),console.error("Error sending message to bot: ",e)})})())}},[m,o,y,f]),(0,n.jsx)(l.Provider,{value:{messages:o,setMessages:u,sendMessage:y,loadingMessage:c},children:t})},c=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useMessage must be used within a MessageProvider");return e}},6968:function(e,t,o){o.d(t,{A:function(){return s},SidebarProvider:function(){return i}});var n=o(7437),r=o(2265);let a=(0,r.createContext)(void 0),i=e=>{let{children:t}=e,[o,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{i(window.innerWidth>=1024)},[]),(0,n.jsx)(a.Provider,{value:{menuVisible:o,handleSidebar:()=>{i(e=>!e)}},children:t})},s=()=>{let e=(0,r.useContext)(a);if(!e)throw Error("useSidebar must be used within a SidebarProvider");return e}},4868:function(e,t,o){o.d(t,{F:function(){return s},ThemeProvider:function(){return i}});var n=o(7437),r=o(2265);let a=(0,r.createContext)(void 0),i=e=>{let{children:t}=e,[o,i]=(0,r.useState)("system"),s=e=>{switch(e){case"dark":i("dark"),localStorage.setItem("theme","dark"),document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light");break;case"light":i("light"),localStorage.setItem("theme","light"),document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark");break;default:i("system"),localStorage.setItem("theme","system"),l()}},l=()=>{window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))};return(0,r.useEffect)(()=>{let e=localStorage.getItem("theme");if(s(null!=e?e:"system"),"system"===e){let e=window.matchMedia("(prefers-color-scheme: dark)");return e.addEventListener("change",l),()=>{e.removeEventListener("change",l)}}},[]),(0,n.jsx)(a.Provider,{value:{theme:o,handleTheme:s},children:t})},s=()=>{let e=(0,r.useContext)(a);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e}},6006:function(e,t,o){o.d(t,{UserProvider:function(){return l},a:function(){return u}});var n=o(7437),r=o(2265),a=o(4868),i=o(5351);let s=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,[o,l]=(0,r.useState)(null),[u,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(!1),h=(0,r.useRef)(!1),{theme:g}=(0,a.F)(),f=e=>{y(e.credential)},w=async()=>{window.google&&!p()&&(h.current||(window.google.accounts.id.initialize({client_id:"717428728866-sb327sbru3vc2g0elm1fkhl5rt3j2o1i.apps.googleusercontent.com",auto_select:!0,use_fedcm_for_prompt:!0,cancel_on_tap_outside:!0,prompt_parent_id:"googleSignInButton",callback:f,context:"use",ux_mode:"popup",select_by:"auto"}),h.current=!0),document.getElementById("googleSignInButton")?window.google.accounts.id.renderButton(document.getElementById("googleSignInButton"),{theme:"system"===g?(window.matchMedia("(prefers-color-scheme: dark)").matches,"filled_black"):g,size:"large",text:"signin_with",type:window.matchMedia("(max-width: 640px)").matches?"icon":"standard"}):console.warn("googleSignInButton element doesn't exist."),window.google.accounts.id.prompt())},y=async e=>{m(!0);let t=null;try{t=await new Promise(async t=>{try{let o=await fetch("".concat((0,i.Aq)(),"/users"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},cache:"no-store"});if(o.ok){let e=await o.json();t(e)}else{let e=await o.text();401===o.status&&v(),console.log("HTTP error! status: ".concat(o.status,", message: ").concat(e)),t(null)}}catch(e){console.log("Login process failed:",e),t(null)}})}catch(e){console.log(e)}t?(l(e),c(t),localStorage.setItem("userToken",e),localStorage.setItem("user",JSON.stringify(t))):await w(),m(!1)},p=()=>null!==o&&null!==u,v=()=>{l(null),c(null),localStorage.removeItem("userToken"),localStorage.removeItem("user"),window.google&&(window.google.accounts.id.revoke(o,()=>{console.log("User disconnected.")}),window.google.accounts.id.disableAutoSelect(),window.location.reload())};return(0,n.jsx)(s.Provider,{value:{credentials:o,user:u,loadingLogin:d,initGoogle:w,login:y,logout:v,isUserLoggedIn:p},children:t})},u=()=>{let e=(0,r.useContext)(s);if(!e)throw Error("useUser must be used within a UserProvider");return e}},5351:function(e,t,o){o.d(t,{Aq:function(){return u},DO:function(){return l},YE:function(){return a},gp:function(){return s},p6:function(){return i}});var n=o(5683),r=o.n(n);function a(){let e=["What would you like to imagine today?","What type of image would you like to create?","Tell me, what do you wish to design today?","What creation inspires you today?","Do you have an image idea in mind?","What is your artistic project for the day?","What do you want to explore visually?","Share your vision for a new creation!","What story would you like to see illustrated?","What elements would you like to combine in your image?","How do you envision your next artwork?","Do you have a theme in mind for your creation?","What do you want to highlight in your image?","What atmosphere do you want to create today?","What details would you like to include in your design?"],t=Math.floor(Math.random()*e.length);return e[t]}function i(e){let t=new Date(e);return new Intl.DateTimeFormat("en-EN",{dateStyle:"long",timeStyle:"short"}).format(t)}let s=e=>{if(!e)return;let t=e.name.startsWith("http")?e.name:"https://picxob.borislukrece.pro/images/"+e.name,o=document.createElement("a");o.href=t,o.download=e.name,o.target="_blank",o.style.display="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)};function l(){return"".concat(r().randomBytes(16).toString("hex"))}function u(){return"https://picxob.borislukrece.pro/backend/api"}}}]);