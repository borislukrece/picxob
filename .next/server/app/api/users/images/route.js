(()=>{var e={};e.id=686,e.ids=[686],e.modules={62849:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=62849,e.exports=r},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},85477:e=>{"use strict";e.exports=require("punycode")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},32745:(e,r,t)=>{"use strict";t.r(r),t.d(r,{originalPathname:()=>E,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var s={};t.r(s),t.d(s,{GET:()=>c});var i=t(49303),o=t(88716),a=t(60670),u=t(62458);let n=new(t(33064)).lv(process.env.GOOGLE_CLIENT_ID);async function c(e){try{let r=e.nextUrl.searchParams,t=e.headers.get("Authorization"),s=t?.split(" ")[1];if(!s)return Response.json({message:"Unauthorized"},{status:401});let i=await new Promise(async e=>{try{let r=(await n.verifyIdToken({idToken:s||"",audience:process.env.GOOGLE_CLIENT_ID})).getPayload();e(r&&void 0!==r?r:null)}catch(r){e(null)}});if(!i)return Response.json({message:"Unauthorized"},{status:401});let o=parseInt(r.get("page")||"1"),a=parseInt(r.get("entries")||"50"),c=await (0,u.U2)(["SELECT * FROM images WHERE sub = ? ORDER BY created_at DESC LIMIT ? OFFSET ?",[i.sub,a,(o-1)*a]]);if(!(Array.isArray(c)&&c.length>0))return Response.json({totalPage:0,images:[]});c=c.map(e=>(e.id=null,e));let p=await (0,u.U2)("SELECT COUNT(*) AS count FROM images"),l=Array.isArray(p)?p[0].count:0,d=Math.ceil(l/a);return Response.json({totalPage:d,images:c})}catch(e){return Response.json({message:"Failed to get images",error:e.message},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/users/images/route",pathname:"/api/users/images",filename:"route",bundlePath:"app/api/users/images/route"},resolvedPagePath:"C:\\Users\\hp\\Desktop\\projects\\picxob.borislukrece.com\\picxob\\src\\app\\api\\users\\images\\route.tsx",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:m}=p,E="/api/users/images/route";function g(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}},62458:(e,r,t)=>{"use strict";t.d(r,{U2:()=>n,v_:()=>c});var s=t(36352),i=t(69518);let o=(0,s.uj)(),a=(0,i.createPool)({host:o.DB_HOST,user:o.DB_USER,password:o.DB_PASSWORD,database:o.DB_NAME,waitForConnections:!0,connectionLimit:10,queueLimit:0});async function u(e,r){let t="",s=[];switch("string"==typeof e?t=e:Array.isArray(e)&&(t=e[0],s=e[1]||[]),r){case"get":if(!t.startsWith("SELECT"))throw Error("Invalid SQL statement");break;case"post":if(!t.startsWith("INSERT INTO"))throw Error("Invalid SQL statement");break;case"update":if(!t.startsWith("UPDATE"))throw Error("Invalid SQL statement");break;case"delete":if(!t.startsWith("DELETE"))throw Error("Invalid SQL statement")}let[i]=await a.query(t,s);return i}async function n(e){return await u(e,"get")}async function c(e,r=null){let t=await u(e,"post");return await new Promise(async e=>{try{if(r){let s=await n([`SELECT * FROM ${r} WHERE id = ? LIMIT 1`,[t.insertId]]);Array.isArray(s)&&s.length>0&&e(s[0])}else e(null)}catch(r){console.log("Error getting item added: ",r.message),e(null)}})}},36352:(e,r,t)=>{"use strict";t.d(r,{DO:()=>i,FX:()=>o,uj:()=>a});var s=t(9576);function i(){let e=(0,s.Z)();return`${e}`}function o(){return"https://picxob.borislukrece.pro"}function a(){return{DB_HOST:process.env.DB_HOST,DB_USER:process.env.DB_USER,DB_NAME:process.env.DB_NAME,DB_PASSWORD:process.env.DB_PASSWORD}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,766,64],()=>t(32745));module.exports=s})();