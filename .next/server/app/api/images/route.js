(()=>{var e={};e.id=312,e.ids=[312],e.modules={62849:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=62849,e.exports=t},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},41808:e=>{"use strict";e.exports=require("net")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},39512:e=>{"use strict";e.exports=require("timers")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},37992:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{GET:()=>u});var i=r(49303),a=r(88716),o=r(60670),n=r(62458);async function u(e){try{let t=e.nextUrl.searchParams,r=parseInt(t.get("page")||"1"),s=parseInt(t.get("entries")||"50"),i=await (0,n.U2)(["SELECT * FROM images ORDER BY created_at DESC LIMIT ? OFFSET ?",[s,(r-1)*s]]);if(!(Array.isArray(i)&&i.length>0))return Response.json({totalPage:0,images:[]});i=i.map(e=>(e.id=null,e.prompt=null,e.sub=null,e));let a=await (0,n.U2)("SELECT COUNT(*) AS count FROM images"),o=Array.isArray(a)?a[0].count:0,u=Math.ceil(o/s);return Response.json({totalPage:u,images:i})}catch(e){return Response.json({message:"Failed to get images",error:e.message},{status:500})}}let c=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/images/route",pathname:"/api/images",filename:"route",bundlePath:"app/api/images/route"},resolvedPagePath:"C:\\Users\\hp\\Desktop\\projects\\picxob.borislukrece.com\\picxob\\src\\app\\api\\images\\route.tsx",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:d}=c,m="/api/images/route";function g(){return(0,o.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:l})}},62458:(e,t,r)=>{"use strict";r.d(t,{U2:()=>a,v_:()=>o});let s=(0,r(69518).createPool)({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME,waitForConnections:!0,connectionLimit:10,queueLimit:0});async function i(e,t){let r="",i=[];switch("string"==typeof e?r=e:Array.isArray(e)&&(r=e[0],i=e[1]||[]),t){case"get":if(!r.startsWith("SELECT"))throw Error("Invalid SQL statement");break;case"post":if(!r.startsWith("INSERT INTO"))throw Error("Invalid SQL statement");break;case"update":if(!r.startsWith("UPDATE"))throw Error("Invalid SQL statement");break;case"delete":if(!r.startsWith("DELETE"))throw Error("Invalid SQL statement")}let[a]=await s.query(r,i);return a}async function a(e){return await i(e,"get")}async function o(e,t=null){let r=await i(e,"post");return await new Promise(async e=>{try{if(t){let s=await a([`SELECT * FROM ${t} WHERE id = ? LIMIT 1`,[r.insertId]]);Array.isArray(s)&&s.length>0&&e(s[0])}else e(null)}catch(t){console.log("Error getting item added: ",t.message),e(null)}})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,662],()=>r(37992));module.exports=s})();